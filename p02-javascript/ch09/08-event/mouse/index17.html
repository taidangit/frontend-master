<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Example 17</title>
<link rel="stylesheet" type="text/css" href="css/style-017.css"/>

<script type="text/javascript" src="js/myCssElement.js"></script>

<script type="text/javascript">

	var xStart, yStart;
	var xTarget, yTarget;
	var flag=false;
	var _target;
	
	
	window.onload=function() {
		document.onmouseover=function() {
			var e = event || window.event;
			var target = e.target != null ? e.target : e.srcElement;
			if(target.parentNode.id == "boxA") {
				target.style.cursor = "move";	
			}
			
		}
		
		document.onmousedown = function() {
			var e = event || window.event;
			var target = e.target != null ? e.target : e.srcElement;
			if(target.parentNode.id == "boxA") {
				var cssTarget=new myCssElement(target);
				var offsetTarget=cssTarget.getOffset(target);
				target.style.position="absolute";
				target.style.left=offsetTarget.left+"px";
				target.style.top=offsetTarget.top+"px";
				target.style.zIndex=1001;
				
				_target=target;
				
				xStart=e.pageX;//vi tri click chuot
				yStart=e.pageY;
				
				xTarget=target.offsetLeft;
				yTarget=target.offsetTop;
				
				flag=true;
				
				console.log(offsetTarget);
			}
		}
		
		document.onmousemove = function() {
			if(flag) {
				var e = event || window.event;
				var xMove = e.pageX - xStart;
				var yMove = e.pageY - yStart;
				
				_target.style.left = xTarget + xMove + "px";
				_target.style.top = yTarget + yMove + "px";
				
				
			}
		}
		
			document.onmouseup = function() {
				flag=false;
			}
	}
	
</script>
</head>

<body>
	<h1 style="text-align:center;">Events</h1>
    <div class="boxA left" id="boxA">	
    	<div id="box" class="childBox"></div>
    </div>
    
    
    
</body>
</html>
